<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script src="https://cdn.tailwindcss.com"></script>
        <script th:src="@{/js/patients.js}"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/base.css}" />
        <title>Admin</title>
    </head>
    <body class="text-sm">
        <aside class="fixed h-full p-3 text-white bg-sky-600 sidebar--width">
            <div class="flex justify-center">
                <img class="rounded-full" src="https://placehold.co/100.png" alt="user-image"/>
            </div>
            <p class="text-center text-base uppercase font-bold my-3">
                Nguyễn Nhật Trường
            </p>
            <hr />
            <ul class="list-none">
                <li>
                    <a th:href="@{/admin/patients}" class="block p-2 hover:bg-sky-500">Quản lý bệnh nhân</a>
                </li>
                <li>
                    <a href="#" class="block p-2 hover:bg-sky-500">Quản lý bệnh viện</a>
                </li>
                <li>
                    <a href="#" class="block p-2 hover:bg-sky-500">Quản lý hồ sơ sức khỏe</a>
                </li>
            </ul>
            <hr />
            <ul class="list-none">
                <li><a href="#" class="block p-2 hover:bg-sky-500">Cài đặt</a></li>
                <li><a href="#" class="block p-2 hover:bg-sky-500">Đăng xuất</a></li>
            </ul>
        </aside>
        <div class="main--align">
            <header class="bg-white border-b border-slate-300 px-3 py-5">
                <a href="#" class="text-2xl font-black text-sky-600">
                    FDC | MEDICAL INFOMATION
                </a>
            </header>
            <main class="p-3">
                <p class="uppercase font-bold text-center text-lg text-sky-600">Danh sách bệnh nhân</p>
                <form action="#" class="flex my-3">
                    <input type="search" class="basis-11/12 border p-2 focus:outline-none" placeholder="Tìm kiếm"/>
                    <button type="submit" class=" basis-1/12 bg-sky-600 text-white p-2 hover:bg-sky-500">Tìm kiếm</button>
                </form>
                <form th:action="@{/admin/patient/delete-patients}" method="post">
                    <table class="w-full table-auto">
                        <caption class="caption-top text-start">
                            <a th:href="@{/admin/patient/save}" class="mr-1 hover:text-sky-500 text-sky-600">
                                <i class="fa fa-plus"></i>
                            </a>
                            <button type="submit" class="hover:text-sky-500 text-sky-600">
                                <i class="fa fa-trash"></i>
                            </button>
                        </caption>
                        <thead>
                            <tr class="text-sky-600 border-y">
                                <th><input type="checkbox" id="checkbox-all" onchange="checkBoxAll()"/></th>
                                <th class="text-left py-2">Mã bệnh nhân</th>
                                <th class="text-left py-2">Họ và tên</th>
                                <th class="text-left py-2">Giới tính</th>
                                <th class="text-left py-2">Ngày sinh</th>
                                <th class="text-left py-2">Điện thoại</th>
                                <th class="text-left py-2">Email</th>
                                <th class="text-left py-2">Thao tác</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="p:${patients}" class="border-b">
                                <td class="px-3 text-center">
                                    <input type="checkbox" th:value="${p.patientId}" name="patientIds" class="patient-checkbox"/>
                                </td>
                                <td th:text="${p.patientId}" class="py-2"></td>
                                <td th:text="${p.fullname}" class="py-2"></td>
                                <td th:text="${p.gender}" class="py-2"></td>
                                <td th:text="${p.dateOfBirth}" class="py-2"></td>
                                <td th:text="${p.phone}" class="py-2"></td>
                                <td th:text="${p.email}" class="py-2"></td>
                                <td class="py-2">
                                    <a th:href="@{'/admin/patient/' + ${p.patientId}}" class="hover:text-sky-500 text-sky-600">
                                        <i class="fa fa-pencil"></i>
                                    </a>
                                    <a href="#" class="mx-2 hover:text-sky-500 text-sky-600">
                                        <i class="fa fa-eye"></i>
                                    </a>
                                    <a href="#" th:onclick="'toggleDeletePatientModal(' + ${p.patientId} + ')'" class="hover:text-sky-500 text-sky-600">
                                        <i class="fa fa-trash"></i>
                                    </a>
                                </td>
                        <div th:id="'delete-modal-' + ${p.patientId}" class="hidden min-w-screen h-screen animated fadeIn faster fixed left-0 top-0 flex justify-center items-center inset-0 z-50 outline-none focus:outline-none bg-no-repeat bg-center bg-cover">
                            <div class="absolute bg-black opacity-30 inset-0 z-0"></div>
                            <div class="max-w-lg min-w-96 p-5 relative bg-white">
                                <div class="text-center flex-auto">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 flex items-center text-sky-600 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 flex items-center text-sky-600 mx-auto" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    <h2 th:text="'Bạn có chắc muốn xóa ' + ${p.fullname} + '?'" class="font-bold py-4"></h2>
                                </div>
                                <div class="text-center space-x-4">
                                    <button type="button" th:onclick="'toggleDeletePatientModal(' + ${p.patientId} + ')'" class="bg-white px-5 py-2 font-medium tracking-wider border text-gray-600 hover:shadow-lg hover:bg-gray-100">
                                        Hủy
                                    </button>
                                    <a th:href="@{'/admin/patient/delete/' + ${p.patientId}}" class="bg-sky-600 border border-sky-600 px-5 py-2 font-medium tracking-wider text-white hover:shadow-lg hover:bg-sky-700">
                                        Xóa
                                    </a>
                                </div>
                            </div>
                        </div>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </main>
        </div>
        <div th:if="${!#strings.isEmpty(message) and result}" id="alert-box"
             class="flex flex-row bg-green-100 fixed bottom-3 left-3 border border-green-400 text-green-700 px-4 py-3 min-w-80"
             role="alert">
            <div class="basis-1/12 font-bold"><i class="fa fa-check"></i></div>
            <div th:text="${message}" class="basis-10/12"></div>
            <button onclick="closeAlert()" class="basis-1/12">
                <i class="fa fa-close"></i>
            </button>
        </div>
        <div th:if="${!#strings.isEmpty(message) and !result}" id="alert-box"
             class="flex flex-row bg-red-100 fixed bottom-3 left-3 border border-red-400 text-red-700 px-4 py-3 min-w-80"
             role="alert">
            <div class="basis-1/12 font-bold"><i class="fa fa-close"></i></div>
            <div th:text="${message}" class="basis-10/12"></div>
            <button onclick="closeAlert()" class="basis-1/12">
                <i class="fa fa-close"></i>
            </button>
        </div>
    </body>
</html>
